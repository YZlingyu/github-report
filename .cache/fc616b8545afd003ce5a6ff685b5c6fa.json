{"dependencies":[{"name":"react"},{"name":"github-calendar"},{"name":"lodash.sortby"},{"name":"axios"},{"name":"babel-polyfill"},{"name":"./index.less"},{"name":"./reactChart"},{"name":"./Loading/index.jsx"},{"name":"./getData.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _githubCalendar = require(\"github-calendar\");\n\nvar _githubCalendar2 = _interopRequireDefault(_githubCalendar);\n\nvar _lodash = require(\"lodash.sortby\");\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _axios = require(\"axios\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nrequire(\"babel-polyfill\");\n\nrequire(\"./index.less\");\n\nvar _reactChart = require(\"./reactChart\");\n\nvar _reactChart2 = _interopRequireDefault(_reactChart);\n\nvar _index = require(\"./Loading/index.jsx\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _getData = require(\"./getData.js\");\n\nvar _getData2 = _interopRequireDefault(_getData);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // package\n\n\n// local\n\n\n// TODO\n// 1.css modules\n// 3.make it as my personal package\n\nvar Github = function (_Component) {\n  _inherits(Github, _Component);\n\n  function Github(props) {\n    _classCallCheck(this, Github);\n\n    var _this = _possibleConstructorReturn(this, (Github.__proto__ || Object.getPrototypeOf(Github)).call(this, props));\n\n    _this.state = {\n      langColor: {\n        unknow: '#000'\n      },\n      viewer: {\n        name: 'peng',\n        avatarUrl: 'http?',\n        bio: '我的经历',\n        createdAt: '公元前',\n        followers: {\n          totalCount: 0\n        },\n        following: {\n          totalCount: 0\n        }\n      },\n      starredLanguage: undefined,\n      oldestRepostort: {\n        name: '某个库',\n        updatedAt: '今天',\n        createdAt: '公元前'\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Github, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var langColor, res, viewer, objectRank;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                langColor = this.state.langColor;\n                _context.t0 = localStorage.githubReport && JSON.parse(localStorage.githubReport);\n\n                if (_context.t0) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 5;\n                return (0, _getData2.default)();\n\n              case 5:\n                _context.t0 = _context.sent;\n\n              case 6:\n                res = _context.t0;\n\n                localStorage.setItem('githubReport', JSON.stringify(_extends({}, res)));\n                viewer = res.viewer;\n\n                this.setState({\n                  viewer: viewer,\n                  oldestRepostort: (0, _lodash2.default)(viewer.repositories.nodes.filter(function (repo) {\n                    return !repo.isFork;\n                  }).map(function (repo) {\n                    return {\n                      time: new Date(repo.updatedAt) - new Date(repo.createdAt),\n                      name: repo.name,\n                      url: repo.url,\n                      updatedAt: repo.updatedAt,\n                      createdAt: repo.createdAt\n                    };\n                  }), function (e) {\n                    return -e.time;\n                  })[0]\n                });\n                objectRank = viewer.starredRepositories.nodes.map(function (arr) {\n                  if (arr.primaryLanguage) {\n                    langColor[arr.primaryLanguage.name] = arr.primaryLanguage.color;\n                    return arr.primaryLanguage.name;\n                  };\n                  return 'unknow';\n                }).reduce(function (acc, curr) {\n                  if (typeof acc[curr] === 'undefined') {\n                    acc[curr] = 1;\n                  } else {\n                    acc[curr] += 1;\n                  }\n                  return acc;\n                }, {});\n\n                this.setState({\n                  starredLanguage: (0, _lodash2.default)(Object.keys(objectRank).map(function (arr) {\n                    return {\n                      name: arr,\n                      count: objectRank[arr],\n                      color: langColor[arr]\n                    };\n                  }), function (o) {\n                    return -o.count;\n                  })\n                });\n                setTimeout(function () {\n                  (0, _githubCalendar2.default)(_this2.container, viewer.login);\n                }, 0);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _ref.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _state = this.state,\n          viewer = _state.viewer,\n          oldestRepostort = _state.oldestRepostort,\n          starredLanguage = _state.starredLanguage;\n\n      return starredLanguage ? _react2.default.createElement(\n        \"div\",\n        { className: \"github\" },\n        _react2.default.createElement(\n          \"h2\",\n          { className: \"title\" },\n          \"\\u6D3B\\u8DC3\\u5EA6\"\n        ),\n        _react2.default.createElement(\"div\", { ref: function ref(c) {\n            _this3.container = c;\n          }, className: \"calendar\" }),\n        _react2.default.createElement(\n          \"h2\",\n          { className: \"title\" },\n          \"\\u57FA\\u672C\\u4FE1\\u606F\"\n        ),\n        _react2.default.createElement(\n          \"div\",\n          { className: \"basic\" },\n          _react2.default.createElement(\n            \"div\",\n            { className: \"detail\" },\n            _react2.default.createElement(\"img\", { src: viewer.avatarUrl, alt: \"\" }),\n            _react2.default.createElement(\n              \"div\",\n              { className: \"detail-container\" },\n              _react2.default.createElement(\n                \"p\",\n                { className: \"name\" },\n                viewer.login\n              ),\n              _react2.default.createElement(\n                \"p\",\n                { className: \"join-time\" },\n                \"\\u52A0\\u5165\\u65F6\\u95F4\\uFF1A\",\n                new Date(viewer.createdAt).toLocaleDateString('ja-JP', {\n                  year: 'numeric',\n                  month: 'short',\n                  day: 'numeric'\n                })\n              ),\n              _react2.default.createElement(\n                \"p\",\n                { className: \"career-time\" },\n                \"\\u7F16\\u7A0B\\u7ECF\\u5386\\uFF1A\",\n                ((new Date() - new Date(viewer.createdAt)) / 1000 / 3600 / 24 / 365).toFixed(1)\n              ),\n              _react2.default.createElement(\n                \"p\",\n                { className: \"bio\" },\n                viewer.bio\n              )\n            )\n          ),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"repositories\" },\n            _react2.default.createElement(\n              \"span\",\n              { className: \"num\" },\n              viewer.repositories.totalCount\n            ),\n            \"Repositories\"\n          ),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"followers\" },\n            _react2.default.createElement(\n              \"span\",\n              { className: \"num\" },\n              viewer.followers.totalCount\n            ),\n            \"Followers\"\n          ),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"following\" },\n            _react2.default.createElement(\n              \"span\",\n              { className: \"num\" },\n              viewer.following.totalCount\n            ),\n            \"Following\"\n          )\n        ),\n        _react2.default.createElement(\n          \"h2\",\n          { className: \"title\" },\n          \"\\u4ED3\\u5E93\\u4FE1\\u606F\"\n        ),\n        _react2.default.createElement(\n          \"div\",\n          { className: \"repository\" },\n          _react2.default.createElement(\n            \"div\",\n            { className: \"repository-star\" },\n            _react2.default.createElement(\n              \"span\",\n              { className: \"show\", role: \"img\", \"aria-label\": \"star\" },\n              \"\\u2B50\",\n              viewer.repositories.nodes.map(function (rep) {\n                return rep.stargazers.totalCount;\n              }).reduce(function (a, b) {\n                return a + b;\n              })\n            ),\n            _react2.default.createElement(\n              \"span\",\n              null,\n              \"\\u6536\\u83B7\\u7684Star\\u6570\"\n            )\n          ),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"repository-fork\" },\n            _react2.default.createElement(\n              \"span\",\n              { className: \"show\", role: \"img\", \"aria-label\": \"fork\" },\n              \"\\uD83C\\uDF74\\xA0\",\n              viewer.repositories.nodes.map(function (rep) {\n                return rep.forks.totalCount;\n              }).reduce(function (a, b) {\n                return a + b;\n              })\n            ),\n            _react2.default.createElement(\n              \"span\",\n              null,\n              \"\\u6536\\u83B7\\u7684Fork\\u6570\"\n            )\n          ),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"repository-my\" },\n            _react2.default.createElement(\n              \"span\",\n              { className: \"show\", role: \"img\", \"aria-label\": \"repository\" },\n              \"\\uD83C\\uDFEC\",\n              viewer.repositories.nodes.filter(function (repo) {\n                return !repo.isFork;\n              }).length\n            ),\n            _react2.default.createElement(\n              \"span\",\n              null,\n              \"\\u539F\\u521BRepository\\u6570\"\n            )\n          ),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"repository-popular\" },\n            _react2.default.createElement(\n              \"span\",\n              { className: \"show\", role: \"img\", \"aria-label\": \"popular\" },\n              \"\\uD83C\\uDF89\",\n              _react2.default.createElement(\n                \"a\",\n                { target: \"_blank\", href: viewer.repositories.nodes[0].url },\n                viewer.repositories.nodes[0].name\n              )\n            ),\n            _react2.default.createElement(\n              \"span\",\n              null,\n              \"\\u6700\\u53D7\\u6B22\\u8FCE\\u7684\\u5E93\"\n            )\n          ),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"repository-oldest\", role: \"img\", \"aria-label\": \"oldest\" },\n            _react2.default.createElement(\n              \"a\",\n              { target: \"_blank\", href: oldestRepostort.url, className: \"show\" },\n              oldestRepostort.name\n            ),\n            \"\\uD83D\\uDD58\",\n            new Date(oldestRepostort.createdAt).toLocaleDateString('ja-JP', { year: 'numeric', month: 'short', day: 'numeric' }),\n            \" ~ \",\n            new Date(oldestRepostort.updatedAt).toLocaleDateString('ja-JP', { year: 'numeric', month: 'short', day: 'numeric' }),\n            _react2.default.createElement(\n              \"span\",\n              null,\n              \"\\u8D21\\u732E\\u6700\\u4E45\\u7684\\u5E93\"\n            )\n          ),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"repository-chart\" },\n            _react2.default.createElement(_reactChart2.default, {\n              type: \"pie\",\n              data: {\n                labels: ['原创仓库', 'Fork'],\n                datasets: [{\n                  data: [viewer.repositories.nodes.filter(function (repo) {\n                    return !repo.isFork;\n                  }).length, viewer.repositories.nodes.filter(function (repo) {\n                    return repo.isFork;\n                  }).length],\n                  backgroundColor: ['#4CAF50'],\n                  hoverBackgroundColor: ['#4CAF50']\n                }]\n              },\n              options: {\n                title: {\n                  display: true,\n                  text: (viewer.repositories.nodes.filter(function (repo) {\n                    return !repo.isFork;\n                  }).length / viewer.repositories.totalCount * 100).toFixed(0) + \"% \\u539F\\u521B\\u4ED3\\u5E93\"\n                },\n                cutoutPercentage: 50\n              }\n            }),\n            _react2.default.createElement(_reactChart2.default, {\n              type: \"pie\",\n              data: {\n                labels: viewer.repositories.nodes.map(function (rep) {\n                  return rep.name;\n                }),\n                datasets: [{\n                  data: viewer.repositories.nodes.map(function (rep) {\n                    return rep.stargazers.totalCount;\n                  }),\n                  backgroundColor: ['#4CAF50', '#A5D6A7', '#E8F5E9'],\n                  hoverBackgroundColor: ['#4CAF50', '#A5D6A7', '#E8F5E9']\n                }]\n              },\n              options: {\n                title: {\n                  display: true,\n                  text: 'Star比例'\n                },\n                cutoutPercentage: 50,\n                legend: {\n                  display: false\n                }\n              }\n            }),\n            _react2.default.createElement(_reactChart2.default, {\n              type: \"pie\",\n              data: {\n                labels: starredLanguage.map(function (lang) {\n                  return lang.name;\n                }),\n                datasets: [{\n                  data: starredLanguage.map(function (lang) {\n                    return lang.count;\n                  }),\n                  backgroundColor: starredLanguage.map(function (lang) {\n                    return lang.color;\n                  }),\n                  hoverBackgroundColor: starredLanguage.map(function (lang) {\n                    return lang.color;\n                  })\n                }]\n              },\n              options: {\n                title: {\n                  display: true,\n                  text: 'Star语言偏好'\n                },\n                cutoutPercentage: 50,\n                legend: { display: false }\n              }\n            })\n          ),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"repository-contribute\" },\n            _react2.default.createElement(\n              \"h2\",\n              { className: \"title\" },\n              \"\\u53C2\\u4E0E\\u8D21\\u732E\\u4E86\",\n              viewer.contributedRepositories.totalCount,\n              \"\\u4E2A\\u9879\\u76EE\"\n            ),\n            viewer.contributedRepositories.nodes.map(function (repo, i) {\n              return _react2.default.createElement(\n                \"a\",\n                { target: \"_blank\", className: \"list\", key: i, href: repo.url },\n                \"@\",\n                repo.nameWithOwner\n              );\n            })\n          )\n        ),\n        _react2.default.createElement(\n          \"h2\",\n          { className: \"title\" },\n          \"\\u611F\\u8C22\\u652F\\u6301\\u6211\\u7684\\u4EBA\"\n        ),\n        _react2.default.createElement(\n          \"div\",\n          { className: \"followers-container\" },\n          starredLanguage && viewer.followers.nodes.map(function (arr, i) {\n            return _react2.default.createElement(\n              \"a\",\n              { target: \"_blank\", href: arr.url, key: i, className: \"list\" },\n              _react2.default.createElement(\"img\", { src: arr.avatarUrl, alt: arr.name }),\n              _react2.default.createElement(\n                \"span\",\n                { className: \"name\" },\n                arr.name\n              )\n            );\n          })\n        ),\n        _react2.default.createElement(\n          \"h2\",\n          { className: \"title\" },\n          \"\\u8FFD\\u5BFB\\u7684\\u5927\\u725B\"\n        ),\n        _react2.default.createElement(\n          \"div\",\n          { className: \"following-container\" },\n          starredLanguage && viewer.following.nodes.map(function (arr, i) {\n            return _react2.default.createElement(\n              \"a\",\n              { target: \"_blank\", href: arr.url, key: i, className: \"list\" },\n              _react2.default.createElement(\"img\", { src: arr.avatarUrl, alt: arr.name }),\n              _react2.default.createElement(\n                \"span\",\n                { className: \"name\" },\n                arr.name\n              )\n            );\n          })\n        )\n      ) : _react2.default.createElement(_index2.default, null);\n    }\n  }]);\n\n  return Github;\n}(_react.Component);\n\nexports.default = Github;"},"hash":"d2312d2c3658148086c59c1e310fafdd"}